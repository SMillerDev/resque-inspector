{{template "header" $}}
<form method="get">
    <fieldset class="grid">
        <select aria-label="Queue" id="queues" name="queue" onchange="loadJobs(0)">
            {{range .queues}}
                <option value="{{.Id}}" {{ if eq .Id $.selected }}selected{{ end }}>{{.Name}}</option>
            {{end}}
        </select>
        <select aria-label="Classes" id="classes" name="class" onchange="loadJobs(0)">
            <option selected disabled value=""> -- Select Class --</option>
        </select>

        <select aria-label="Exceptions" id="exceptions" name="exception" onchange="loadJobs(0)">
            <option selected disabled value=""> -- Select Exception --</option>
        </select>
        <input aria-label="Regex filter" id="regex" name="regex" placeholder=".*" onchange="loadJobs(0)" onkeyup="loadJobs(0)" autofocus/>
    </fieldset>
</form>
<table>
    <thead id="job-header">
    <tr>
        <th scope="col"></th>
        <th scope="col">Class</th>
        <th scope="col">Queued at</th>
        <th scope="col" class="{{ if eq .selected "failed"}}{{ else }}d-none{{ end }}">Exception</th>
        <th scope="col" class="{{ if eq .selected "failed"}}{{ else }}d-none{{ end }}">Failed at</th>
    </tr>
    </thead>
    <tbody id="job-list">
    </tbody>
</table>
<section id="edit-bar" class="d-none">
    <button class="danger" onclick="deleteJob(document.getElementById('queues').value, null)">Delete</button>
    <button class="warning {{ if eq .selected "failed" }}{{ else }}d-none{{ end }}" onclick="retryJob(document.getElementById('queues').value, null)">Retry</button>
</section>
{{template "footer" $}}